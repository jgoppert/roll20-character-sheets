<!DOCTYPE html>
<!-- V5e.html is generated by V5e.py, so don't EDIT it -->

<head>
  <title>Vampire the Masquerade 5th Edition</title>
  <link rel="stylesheet" type="text/css" href="V5e.css">
</head>

<body>

<div class="sheet-page">

  <!-- Title -->
  <div style="display: inline-block;">
    <h1>Vampire the Masquerade</h1>
    <h4>5th Edition</h4>
  </div>
  <br />

  <!-- Basics -->
  <div class="sheet-divrow" style="display: inline-block;">
    <h2 style="display: inline-block;">Basics</h2>
    <input title="hide" name="attr_basics_switch" style="width: 1em;display: inline-block;" type="checkbox" class="sheet-block-switch"/>
    <br />
    <div class="sheet-block-a">
      <div class="sheet-divcol">
        <table>
          <tr>
            <th style="width: 7em">Name:</th>
            <td><input class="prop_val" title="name" type="text" name="attr_name"/></td>
          </tr>
          <tr>
            <th style="width: 7em">Chronicle:</th>
            <td><input class="prop_val" title="chronicle" type="text" name="attr_chronicle"/></td>
          </tr>
          <tr>
            <th style="width: 7em">Sire:</th>
            <td><input class="prop_val" title="sire" type="text" name="attr_sire"/></td>
          </tr>
        </table>
      </div>
      <div class="sheet-divcol">
        <table>
          <tr>
            <th style="width: 7em">Concept:</th>
            <td><input class="prop_val" title="concept" type="text" name="attr_concept"/></td>
          </tr>
          <tr>
            <th style="width: 7em">Ambition:</th>
            <td><input class="prop_val" title="ambition" type="text" name="attr_ambition"/></td>
          </tr>
          <tr>
            <th style="width: 7em">Desire:</th>
            <td><input class="prop_val" title="desire" type="text" name="attr_desire"/></td>
          </tr>
        </table>
      </div>
      <div class="sheet-divcol">
        <table>
          <tr>
            <th style="width: 7em">Predator:</th>
            <td><input class="prop_val" title="predator" type="text" name="attr_predator"/></td>
          </tr>
          <tr>
            <th style="width: 7em">Clan:</th>
            <td><input class="prop_val" title="clan" type="text" name="attr_clan"/></td>
          </tr>
          <tr>
            <th style="width: 7em">Generation:</th>
            <td><input class="prop_val" title="generation" type="text" name="attr_generation"/></td>
          </tr>
        </table>
      </div>
    </div>
    <div class="sheet-block-b">
    </div>
  </div>

  <!-- Stats -->
  <div class="sheet-divrow">
    <h2 style="display: inline-block;">Stats</h2>
    <input title="hide" name="attr_stats_switch" style="width: 1em;display: inline-block;" type="checkbox" class="sheet-block-switch"/>
    <br />
    <div class="sheet-block-a">
      <div class="sheet-divcol">
        <h3>Misc</h3>
        <table >
          <input name="attr_total_xp" value="0" type="hidden"/>
          <tr>
            <th>Xp</th>
            <td><input name="attr_total_xp_disp" value="@{total_xp}" title="xp spent" type="number" disabled="true"/></td>
            <td>/</td>
            <td><input name="attr_xp_avail" value="0" title="xp available" type="number"/></td>
          </tr>
          <tr>
            <th>Hunger</th>
            <td><input name="attr_hunger" value="0" title="hunger" type="number"/></td>
            <td>/</td>
            <td><input name="attr_hunger_max" value="5" title="hunger max" type="number" disabled="true"/></td>
          </tr>
          <tr>
            <th>Humanity</th>
            <td><input name="attr_humanity" value="0" title="humanity" type="number"/></td>
            <td>/</td>
            <td><input name="attr_humanity_max" value="10" title="humanity max" type="number" disabled="true"/></td>
          </tr>
        </table>
      </div>
      <div class="sheet-divcol">
        <h3>Health</h3>
        <div style="width: 9em; display:inline-block;">
          <table>
            
            <tr>
              <th>Superficial</th>
              <td><input name="attr_dmg_superficial" value="0" min="0" title="superficial damage" type="number"/></td>
            </tr>
            
            <tr>
              <th>Aggravated</th>
              <td><input name="attr_dmg_aggravated" value="0" min="0" title="aggravated damage" type="number"/></td>
            </tr>
            
            <tr>
              <th>Level</th>
              <input name="attr_health" value="0" type="hidden"/>
              <td><input name="attr_health_disp" value="@{health}" title="health" type="number" disabled="true"/></td>
              <td>/</td>
              <td><input name="attr_health_levels" value="7" min="0" title="health levels" type="number"/></td>
            </tr>
            <tr>
              <th>State</th>
              <input name="attr_health_state" value="OK" type="hidden"/>
              <td colspan="3"><input name="attr_health_state_disp" value="@{health_state}" title="health state" type="text" disabled="true"/></td>
            </tr>
          </table>
        </div>
      </div>
      <div class="sheet-divcol">
        <h3>Willpower</h3>
        <div style="width: 9em; display:inline-block;">
          <table>
            
            <tr>
              <th>Superficial</th>
              <td><input name="attr_will_superficial" value="0" min="0" title="superficial damage" type="number"/></td>
            </tr>
            
            <tr>
              <th>Aggravated</th>
              <td><input name="attr_will_aggravated" value="0" min="0" title="aggravated damage" type="number"/></td>
            </tr>
            
            <tr>
              <th>Level</th>
              <input name="attr_health" value="0" type="hidden"/>
              <td><input name="attr_will_disp" value="@{will}" title="will" type="number" disabled="true"/></td>
              <td>/</td>
              <td><input name="attr_will_levels" value="7" min="0" title="will levels" type="number"/></td>
            </tr>
            <tr>
              <th>State</th>
              <input name="attr_will_state" value="OK" type="hidden"/>
              <td colspan="3"><input name="attr_will_state_disp" value="@{will_state}" title="will state" type="text" disabled="true"/></td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <div class="sheet-block-b">
    </div>
  </div>

  <!-- Character Sheet Sections -->
  <!-- Section Attributes -->
  <div class="sheet-divrow">
    <h2 style="display: inline-block;">Attributes</h2>
    
    <input name="attr_attributes_base" value="0" type="hidden" />
    
    <input name="attr_attributes_xp" value="0" type="hidden" />
    
    <input title="hide" name="attr_attributes_switch" style="width: 1em;display: inline-block;" type="checkbox" class="sheet-block-switch">
    <br />
    <div class="sheet-block-a">
      
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Physical</h3>
      <input title="details" name="attr_physical_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch">
      <br />
      <div class="sheet-block-a">
        <table summary="Physical basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
          
          <tr>
            <th>Strength</th>
            <td><input class="prop_val" name="attr_strength_radio" value="0" title="Strength total" type="radio" /></td>
            <td><input class="prop_val" name="attr_strength_radio" value="1" title="Strength total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_strength_radio" value="2" title="Strength total" type="radio" /></td>
            <td><input class="prop_val" name="attr_strength_radio" value="3" title="Strength total" type="radio" /></td>
            <td><input class="prop_val" name="attr_strength_radio" value="4" title="Strength total" type="radio" /></td>
            <td><input class="prop_val" name="attr_strength_radio" value="5" title="Strength total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Dexterity</th>
            <td><input class="prop_val" name="attr_dexterity_radio" value="0" title="Dexterity total" type="radio" /></td>
            <td><input class="prop_val" name="attr_dexterity_radio" value="1" title="Dexterity total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_dexterity_radio" value="2" title="Dexterity total" type="radio" /></td>
            <td><input class="prop_val" name="attr_dexterity_radio" value="3" title="Dexterity total" type="radio" /></td>
            <td><input class="prop_val" name="attr_dexterity_radio" value="4" title="Dexterity total" type="radio" /></td>
            <td><input class="prop_val" name="attr_dexterity_radio" value="5" title="Dexterity total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Stamina</th>
            <td><input class="prop_val" name="attr_stamina_radio" value="0" title="Stamina total" type="radio" /></td>
            <td><input class="prop_val" name="attr_stamina_radio" value="1" title="Stamina total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_stamina_radio" value="2" title="Stamina total" type="radio" /></td>
            <td><input class="prop_val" name="attr_stamina_radio" value="3" title="Stamina total" type="radio" /></td>
            <td><input class="prop_val" name="attr_stamina_radio" value="4" title="Stamina total" type="radio" /></td>
            <td><input class="prop_val" name="attr_stamina_radio" value="5" title="Stamina total" type="radio" /></td>
          </tr>
        </table>
      </div>
      <div class="sheet-block-b">
        <table summary="physical detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead>
          <tr>
            
            <th>Strength</th>
            <td><input class="prop_val" name="attr_strength_base" value="1" title="Strength base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_strength_xp" value="0" title="Strength xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_strength" value="0" type="hidden" />
              <input class="prop_result" name="attr_strength_disp" value="@{strength}" type="number" title="Strength total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Dexterity</th>
            <td><input class="prop_val" name="attr_dexterity_base" value="1" title="Dexterity base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_dexterity_xp" value="0" title="Dexterity xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_dexterity" value="0" type="hidden" />
              <input class="prop_result" name="attr_dexterity_disp" value="@{dexterity}" type="number" title="Dexterity total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Stamina</th>
            <td><input class="prop_val" name="attr_stamina_base" value="1" title="Stamina base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_stamina_xp" value="0" title="Stamina xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_stamina" value="0" type="hidden" />
              <input class="prop_result" name="attr_stamina_disp" value="@{stamina}" type="number" title="Stamina total" disabled="true" />
            </td>
          </tr>
          <tr>
            <th style="font-style: italic; border-top: 0.1em solid #4d4d4d;">Cost</th>
          
            <input name="attr_physical_base" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_physical_base_disp" title="Physical base"
            value="@{physical_base}" type="number" disabled="true"/></td>
          
            <input name="attr_physical_xp" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_physical_xp_disp" title="Physical xp"
            value="@{physical_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Social</h3>
      <input title="details" name="attr_social_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch">
      <br />
      <div class="sheet-block-a">
        <table summary="Social basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
          
          <tr>
            <th>Charisma</th>
            <td><input class="prop_val" name="attr_charisma_radio" value="0" title="Charisma total" type="radio" /></td>
            <td><input class="prop_val" name="attr_charisma_radio" value="1" title="Charisma total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_charisma_radio" value="2" title="Charisma total" type="radio" /></td>
            <td><input class="prop_val" name="attr_charisma_radio" value="3" title="Charisma total" type="radio" /></td>
            <td><input class="prop_val" name="attr_charisma_radio" value="4" title="Charisma total" type="radio" /></td>
            <td><input class="prop_val" name="attr_charisma_radio" value="5" title="Charisma total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Manipulation</th>
            <td><input class="prop_val" name="attr_manipulation_radio" value="0" title="Manipulation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_manipulation_radio" value="1" title="Manipulation total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_manipulation_radio" value="2" title="Manipulation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_manipulation_radio" value="3" title="Manipulation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_manipulation_radio" value="4" title="Manipulation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_manipulation_radio" value="5" title="Manipulation total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Composure</th>
            <td><input class="prop_val" name="attr_composure_radio" value="0" title="Composure total" type="radio" /></td>
            <td><input class="prop_val" name="attr_composure_radio" value="1" title="Composure total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_composure_radio" value="2" title="Composure total" type="radio" /></td>
            <td><input class="prop_val" name="attr_composure_radio" value="3" title="Composure total" type="radio" /></td>
            <td><input class="prop_val" name="attr_composure_radio" value="4" title="Composure total" type="radio" /></td>
            <td><input class="prop_val" name="attr_composure_radio" value="5" title="Composure total" type="radio" /></td>
          </tr>
        </table>
      </div>
      <div class="sheet-block-b">
        <table summary="social detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead>
          <tr>
            
            <th>Charisma</th>
            <td><input class="prop_val" name="attr_charisma_base" value="1" title="Charisma base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_charisma_xp" value="0" title="Charisma xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_charisma" value="0" type="hidden" />
              <input class="prop_result" name="attr_charisma_disp" value="@{charisma}" type="number" title="Charisma total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Manipulation</th>
            <td><input class="prop_val" name="attr_manipulation_base" value="1" title="Manipulation base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_manipulation_xp" value="0" title="Manipulation xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_manipulation" value="0" type="hidden" />
              <input class="prop_result" name="attr_manipulation_disp" value="@{manipulation}" type="number" title="Manipulation total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Composure</th>
            <td><input class="prop_val" name="attr_composure_base" value="1" title="Composure base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_composure_xp" value="0" title="Composure xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_composure" value="0" type="hidden" />
              <input class="prop_result" name="attr_composure_disp" value="@{composure}" type="number" title="Composure total" disabled="true" />
            </td>
          </tr>
          <tr>
            <th style="font-style: italic; border-top: 0.1em solid #4d4d4d;">Cost</th>
          
            <input name="attr_social_base" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_social_base_disp" title="Social base"
            value="@{social_base}" type="number" disabled="true"/></td>
          
            <input name="attr_social_xp" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_social_xp_disp" title="Social xp"
            value="@{social_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Mental</h3>
      <input title="details" name="attr_mental_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch">
      <br />
      <div class="sheet-block-a">
        <table summary="Mental basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
          
          <tr>
            <th>Intelligence</th>
            <td><input class="prop_val" name="attr_intelligence_radio" value="0" title="Intelligence total" type="radio" /></td>
            <td><input class="prop_val" name="attr_intelligence_radio" value="1" title="Intelligence total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_intelligence_radio" value="2" title="Intelligence total" type="radio" /></td>
            <td><input class="prop_val" name="attr_intelligence_radio" value="3" title="Intelligence total" type="radio" /></td>
            <td><input class="prop_val" name="attr_intelligence_radio" value="4" title="Intelligence total" type="radio" /></td>
            <td><input class="prop_val" name="attr_intelligence_radio" value="5" title="Intelligence total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Wits</th>
            <td><input class="prop_val" name="attr_wits_radio" value="0" title="Wits total" type="radio" /></td>
            <td><input class="prop_val" name="attr_wits_radio" value="1" title="Wits total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_wits_radio" value="2" title="Wits total" type="radio" /></td>
            <td><input class="prop_val" name="attr_wits_radio" value="3" title="Wits total" type="radio" /></td>
            <td><input class="prop_val" name="attr_wits_radio" value="4" title="Wits total" type="radio" /></td>
            <td><input class="prop_val" name="attr_wits_radio" value="5" title="Wits total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Resolve</th>
            <td><input class="prop_val" name="attr_resolve_radio" value="0" title="Resolve total" type="radio" /></td>
            <td><input class="prop_val" name="attr_resolve_radio" value="1" title="Resolve total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_resolve_radio" value="2" title="Resolve total" type="radio" /></td>
            <td><input class="prop_val" name="attr_resolve_radio" value="3" title="Resolve total" type="radio" /></td>
            <td><input class="prop_val" name="attr_resolve_radio" value="4" title="Resolve total" type="radio" /></td>
            <td><input class="prop_val" name="attr_resolve_radio" value="5" title="Resolve total" type="radio" /></td>
          </tr>
        </table>
      </div>
      <div class="sheet-block-b">
        <table summary="mental detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead>
          <tr>
            
            <th>Intelligence</th>
            <td><input class="prop_val" name="attr_intelligence_base" value="1" title="Intelligence base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_intelligence_xp" value="0" title="Intelligence xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_intelligence" value="0" type="hidden" />
              <input class="prop_result" name="attr_intelligence_disp" value="@{intelligence}" type="number" title="Intelligence total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Wits</th>
            <td><input class="prop_val" name="attr_wits_base" value="1" title="Wits base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_wits_xp" value="0" title="Wits xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_wits" value="0" type="hidden" />
              <input class="prop_result" name="attr_wits_disp" value="@{wits}" type="number" title="Wits total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Resolve</th>
            <td><input class="prop_val" name="attr_resolve_base" value="1" title="Resolve base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_resolve_xp" value="0" title="Resolve xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_resolve" value="0" type="hidden" />
              <input class="prop_result" name="attr_resolve_disp" value="@{resolve}" type="number" title="Resolve total" disabled="true" />
            </td>
          </tr>
          <tr>
            <th style="font-style: italic; border-top: 0.1em solid #4d4d4d;">Cost</th>
          
            <input name="attr_mental_base" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_mental_base_disp" title="Mental base"
            value="@{mental_base}" type="number" disabled="true"/></td>
          
            <input name="attr_mental_xp" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_mental_xp_disp" title="Mental xp"
            value="@{mental_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
    </div>
    <div class="sheet-block-b">
    </div>
  </div>
  
  <!-- Section Abilities -->
  <div class="sheet-divrow">
    <h2 style="display: inline-block;">Abilities</h2>
    
    <input name="attr_abilities_base" value="0" type="hidden" />
    
    <input name="attr_abilities_xp" value="0" type="hidden" />
    
    <input title="hide" name="attr_abilities_switch" style="width: 1em;display: inline-block;" type="checkbox" class="sheet-block-switch">
    <br />
    <div class="sheet-block-a">
      
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Talents</h3>
      <input title="details" name="attr_talents_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch">
      <br />
      <div class="sheet-block-a">
        <table summary="Talents basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
          
          <tr>
            <th>Atheletics</th>
            <td><input class="prop_val" name="attr_atheletics_radio" value="0" title="Atheletics total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_atheletics_radio" value="1" title="Atheletics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_atheletics_radio" value="2" title="Atheletics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_atheletics_radio" value="3" title="Atheletics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_atheletics_radio" value="4" title="Atheletics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_atheletics_radio" value="5" title="Atheletics total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Brawl</th>
            <td><input class="prop_val" name="attr_brawl_radio" value="0" title="Brawl total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_brawl_radio" value="1" title="Brawl total" type="radio" /></td>
            <td><input class="prop_val" name="attr_brawl_radio" value="2" title="Brawl total" type="radio" /></td>
            <td><input class="prop_val" name="attr_brawl_radio" value="3" title="Brawl total" type="radio" /></td>
            <td><input class="prop_val" name="attr_brawl_radio" value="4" title="Brawl total" type="radio" /></td>
            <td><input class="prop_val" name="attr_brawl_radio" value="5" title="Brawl total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Craft</th>
            <td><input class="prop_val" name="attr_craft_radio" value="0" title="Craft total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_craft_radio" value="1" title="Craft total" type="radio" /></td>
            <td><input class="prop_val" name="attr_craft_radio" value="2" title="Craft total" type="radio" /></td>
            <td><input class="prop_val" name="attr_craft_radio" value="3" title="Craft total" type="radio" /></td>
            <td><input class="prop_val" name="attr_craft_radio" value="4" title="Craft total" type="radio" /></td>
            <td><input class="prop_val" name="attr_craft_radio" value="5" title="Craft total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Drive</th>
            <td><input class="prop_val" name="attr_drive_radio" value="0" title="Drive total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_drive_radio" value="1" title="Drive total" type="radio" /></td>
            <td><input class="prop_val" name="attr_drive_radio" value="2" title="Drive total" type="radio" /></td>
            <td><input class="prop_val" name="attr_drive_radio" value="3" title="Drive total" type="radio" /></td>
            <td><input class="prop_val" name="attr_drive_radio" value="4" title="Drive total" type="radio" /></td>
            <td><input class="prop_val" name="attr_drive_radio" value="5" title="Drive total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Firearms</th>
            <td><input class="prop_val" name="attr_firearms_radio" value="0" title="Firearms total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_firearms_radio" value="1" title="Firearms total" type="radio" /></td>
            <td><input class="prop_val" name="attr_firearms_radio" value="2" title="Firearms total" type="radio" /></td>
            <td><input class="prop_val" name="attr_firearms_radio" value="3" title="Firearms total" type="radio" /></td>
            <td><input class="prop_val" name="attr_firearms_radio" value="4" title="Firearms total" type="radio" /></td>
            <td><input class="prop_val" name="attr_firearms_radio" value="5" title="Firearms total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Melee</th>
            <td><input class="prop_val" name="attr_melee_radio" value="0" title="Melee total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_melee_radio" value="1" title="Melee total" type="radio" /></td>
            <td><input class="prop_val" name="attr_melee_radio" value="2" title="Melee total" type="radio" /></td>
            <td><input class="prop_val" name="attr_melee_radio" value="3" title="Melee total" type="radio" /></td>
            <td><input class="prop_val" name="attr_melee_radio" value="4" title="Melee total" type="radio" /></td>
            <td><input class="prop_val" name="attr_melee_radio" value="5" title="Melee total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Larceny</th>
            <td><input class="prop_val" name="attr_larceny_radio" value="0" title="Larceny total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_larceny_radio" value="1" title="Larceny total" type="radio" /></td>
            <td><input class="prop_val" name="attr_larceny_radio" value="2" title="Larceny total" type="radio" /></td>
            <td><input class="prop_val" name="attr_larceny_radio" value="3" title="Larceny total" type="radio" /></td>
            <td><input class="prop_val" name="attr_larceny_radio" value="4" title="Larceny total" type="radio" /></td>
            <td><input class="prop_val" name="attr_larceny_radio" value="5" title="Larceny total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Stealth</th>
            <td><input class="prop_val" name="attr_stealth_radio" value="0" title="Stealth total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_stealth_radio" value="1" title="Stealth total" type="radio" /></td>
            <td><input class="prop_val" name="attr_stealth_radio" value="2" title="Stealth total" type="radio" /></td>
            <td><input class="prop_val" name="attr_stealth_radio" value="3" title="Stealth total" type="radio" /></td>
            <td><input class="prop_val" name="attr_stealth_radio" value="4" title="Stealth total" type="radio" /></td>
            <td><input class="prop_val" name="attr_stealth_radio" value="5" title="Stealth total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Survival</th>
            <td><input class="prop_val" name="attr_survival_radio" value="0" title="Survival total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_survival_radio" value="1" title="Survival total" type="radio" /></td>
            <td><input class="prop_val" name="attr_survival_radio" value="2" title="Survival total" type="radio" /></td>
            <td><input class="prop_val" name="attr_survival_radio" value="3" title="Survival total" type="radio" /></td>
            <td><input class="prop_val" name="attr_survival_radio" value="4" title="Survival total" type="radio" /></td>
            <td><input class="prop_val" name="attr_survival_radio" value="5" title="Survival total" type="radio" /></td>
          </tr>
        </table>
      </div>
      <div class="sheet-block-b">
        <table summary="talents detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead>
          <tr>
            
            <th>Atheletics</th>
            <td><input class="prop_val" name="attr_atheletics_base" value="0" title="Atheletics base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_atheletics_xp" value="0" title="Atheletics xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_atheletics" value="0" type="hidden" />
              <input class="prop_result" name="attr_atheletics_disp" value="@{atheletics}" type="number" title="Atheletics total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Brawl</th>
            <td><input class="prop_val" name="attr_brawl_base" value="0" title="Brawl base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_brawl_xp" value="0" title="Brawl xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_brawl" value="0" type="hidden" />
              <input class="prop_result" name="attr_brawl_disp" value="@{brawl}" type="number" title="Brawl total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Craft</th>
            <td><input class="prop_val" name="attr_craft_base" value="0" title="Craft base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_craft_xp" value="0" title="Craft xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_craft" value="0" type="hidden" />
              <input class="prop_result" name="attr_craft_disp" value="@{craft}" type="number" title="Craft total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Drive</th>
            <td><input class="prop_val" name="attr_drive_base" value="0" title="Drive base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_drive_xp" value="0" title="Drive xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_drive" value="0" type="hidden" />
              <input class="prop_result" name="attr_drive_disp" value="@{drive}" type="number" title="Drive total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Firearms</th>
            <td><input class="prop_val" name="attr_firearms_base" value="0" title="Firearms base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_firearms_xp" value="0" title="Firearms xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_firearms" value="0" type="hidden" />
              <input class="prop_result" name="attr_firearms_disp" value="@{firearms}" type="number" title="Firearms total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Melee</th>
            <td><input class="prop_val" name="attr_melee_base" value="0" title="Melee base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_melee_xp" value="0" title="Melee xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_melee" value="0" type="hidden" />
              <input class="prop_result" name="attr_melee_disp" value="@{melee}" type="number" title="Melee total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Larceny</th>
            <td><input class="prop_val" name="attr_larceny_base" value="0" title="Larceny base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_larceny_xp" value="0" title="Larceny xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_larceny" value="0" type="hidden" />
              <input class="prop_result" name="attr_larceny_disp" value="@{larceny}" type="number" title="Larceny total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Stealth</th>
            <td><input class="prop_val" name="attr_stealth_base" value="0" title="Stealth base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_stealth_xp" value="0" title="Stealth xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_stealth" value="0" type="hidden" />
              <input class="prop_result" name="attr_stealth_disp" value="@{stealth}" type="number" title="Stealth total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Survival</th>
            <td><input class="prop_val" name="attr_survival_base" value="0" title="Survival base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_survival_xp" value="0" title="Survival xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_survival" value="0" type="hidden" />
              <input class="prop_result" name="attr_survival_disp" value="@{survival}" type="number" title="Survival total" disabled="true" />
            </td>
          </tr>
          <tr>
            <th style="font-style: italic; border-top: 0.1em solid #4d4d4d;">Cost</th>
          
            <input name="attr_talents_base" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_talents_base_disp" title="Talents base"
            value="@{talents_base}" type="number" disabled="true"/></td>
          
            <input name="attr_talents_xp" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_talents_xp_disp" title="Talents xp"
            value="@{talents_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Skills</h3>
      <input title="details" name="attr_skills_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch">
      <br />
      <div class="sheet-block-a">
        <table summary="Skills basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
          
          <tr>
            <th>Animal Ken</th>
            <td><input class="prop_val" name="attr_animal_ken_radio" value="0" title="Animal Ken total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_animal_ken_radio" value="1" title="Animal Ken total" type="radio" /></td>
            <td><input class="prop_val" name="attr_animal_ken_radio" value="2" title="Animal Ken total" type="radio" /></td>
            <td><input class="prop_val" name="attr_animal_ken_radio" value="3" title="Animal Ken total" type="radio" /></td>
            <td><input class="prop_val" name="attr_animal_ken_radio" value="4" title="Animal Ken total" type="radio" /></td>
            <td><input class="prop_val" name="attr_animal_ken_radio" value="5" title="Animal Ken total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Etiquette</th>
            <td><input class="prop_val" name="attr_etiquette_radio" value="0" title="Etiquette total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_etiquette_radio" value="1" title="Etiquette total" type="radio" /></td>
            <td><input class="prop_val" name="attr_etiquette_radio" value="2" title="Etiquette total" type="radio" /></td>
            <td><input class="prop_val" name="attr_etiquette_radio" value="3" title="Etiquette total" type="radio" /></td>
            <td><input class="prop_val" name="attr_etiquette_radio" value="4" title="Etiquette total" type="radio" /></td>
            <td><input class="prop_val" name="attr_etiquette_radio" value="5" title="Etiquette total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Insight</th>
            <td><input class="prop_val" name="attr_insight_radio" value="0" title="Insight total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_insight_radio" value="1" title="Insight total" type="radio" /></td>
            <td><input class="prop_val" name="attr_insight_radio" value="2" title="Insight total" type="radio" /></td>
            <td><input class="prop_val" name="attr_insight_radio" value="3" title="Insight total" type="radio" /></td>
            <td><input class="prop_val" name="attr_insight_radio" value="4" title="Insight total" type="radio" /></td>
            <td><input class="prop_val" name="attr_insight_radio" value="5" title="Insight total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Initimidation</th>
            <td><input class="prop_val" name="attr_initimidation_radio" value="0" title="Initimidation total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_initimidation_radio" value="1" title="Initimidation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_initimidation_radio" value="2" title="Initimidation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_initimidation_radio" value="3" title="Initimidation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_initimidation_radio" value="4" title="Initimidation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_initimidation_radio" value="5" title="Initimidation total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Leadership</th>
            <td><input class="prop_val" name="attr_leadership_radio" value="0" title="Leadership total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_leadership_radio" value="1" title="Leadership total" type="radio" /></td>
            <td><input class="prop_val" name="attr_leadership_radio" value="2" title="Leadership total" type="radio" /></td>
            <td><input class="prop_val" name="attr_leadership_radio" value="3" title="Leadership total" type="radio" /></td>
            <td><input class="prop_val" name="attr_leadership_radio" value="4" title="Leadership total" type="radio" /></td>
            <td><input class="prop_val" name="attr_leadership_radio" value="5" title="Leadership total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Performance</th>
            <td><input class="prop_val" name="attr_performance_radio" value="0" title="Performance total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_performance_radio" value="1" title="Performance total" type="radio" /></td>
            <td><input class="prop_val" name="attr_performance_radio" value="2" title="Performance total" type="radio" /></td>
            <td><input class="prop_val" name="attr_performance_radio" value="3" title="Performance total" type="radio" /></td>
            <td><input class="prop_val" name="attr_performance_radio" value="4" title="Performance total" type="radio" /></td>
            <td><input class="prop_val" name="attr_performance_radio" value="5" title="Performance total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Persuasion</th>
            <td><input class="prop_val" name="attr_persuasion_radio" value="0" title="Persuasion total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_persuasion_radio" value="1" title="Persuasion total" type="radio" /></td>
            <td><input class="prop_val" name="attr_persuasion_radio" value="2" title="Persuasion total" type="radio" /></td>
            <td><input class="prop_val" name="attr_persuasion_radio" value="3" title="Persuasion total" type="radio" /></td>
            <td><input class="prop_val" name="attr_persuasion_radio" value="4" title="Persuasion total" type="radio" /></td>
            <td><input class="prop_val" name="attr_persuasion_radio" value="5" title="Persuasion total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Streetwise</th>
            <td><input class="prop_val" name="attr_streetwise_radio" value="0" title="Streetwise total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_streetwise_radio" value="1" title="Streetwise total" type="radio" /></td>
            <td><input class="prop_val" name="attr_streetwise_radio" value="2" title="Streetwise total" type="radio" /></td>
            <td><input class="prop_val" name="attr_streetwise_radio" value="3" title="Streetwise total" type="radio" /></td>
            <td><input class="prop_val" name="attr_streetwise_radio" value="4" title="Streetwise total" type="radio" /></td>
            <td><input class="prop_val" name="attr_streetwise_radio" value="5" title="Streetwise total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Subterfuge</th>
            <td><input class="prop_val" name="attr_subterfuge_radio" value="0" title="Subterfuge total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_subterfuge_radio" value="1" title="Subterfuge total" type="radio" /></td>
            <td><input class="prop_val" name="attr_subterfuge_radio" value="2" title="Subterfuge total" type="radio" /></td>
            <td><input class="prop_val" name="attr_subterfuge_radio" value="3" title="Subterfuge total" type="radio" /></td>
            <td><input class="prop_val" name="attr_subterfuge_radio" value="4" title="Subterfuge total" type="radio" /></td>
            <td><input class="prop_val" name="attr_subterfuge_radio" value="5" title="Subterfuge total" type="radio" /></td>
          </tr>
        </table>
      </div>
      <div class="sheet-block-b">
        <table summary="skills detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead>
          <tr>
            
            <th>Animal Ken</th>
            <td><input class="prop_val" name="attr_animal_ken_base" value="0" title="Animal Ken base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_animal_ken_xp" value="0" title="Animal Ken xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_animal_ken" value="0" type="hidden" />
              <input class="prop_result" name="attr_animal_ken_disp" value="@{animal_ken}" type="number" title="Animal Ken total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Etiquette</th>
            <td><input class="prop_val" name="attr_etiquette_base" value="0" title="Etiquette base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_etiquette_xp" value="0" title="Etiquette xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_etiquette" value="0" type="hidden" />
              <input class="prop_result" name="attr_etiquette_disp" value="@{etiquette}" type="number" title="Etiquette total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Insight</th>
            <td><input class="prop_val" name="attr_insight_base" value="0" title="Insight base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_insight_xp" value="0" title="Insight xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_insight" value="0" type="hidden" />
              <input class="prop_result" name="attr_insight_disp" value="@{insight}" type="number" title="Insight total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Initimidation</th>
            <td><input class="prop_val" name="attr_initimidation_base" value="0" title="Initimidation base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_initimidation_xp" value="0" title="Initimidation xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_initimidation" value="0" type="hidden" />
              <input class="prop_result" name="attr_initimidation_disp" value="@{initimidation}" type="number" title="Initimidation total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Leadership</th>
            <td><input class="prop_val" name="attr_leadership_base" value="0" title="Leadership base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_leadership_xp" value="0" title="Leadership xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_leadership" value="0" type="hidden" />
              <input class="prop_result" name="attr_leadership_disp" value="@{leadership}" type="number" title="Leadership total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Performance</th>
            <td><input class="prop_val" name="attr_performance_base" value="0" title="Performance base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_performance_xp" value="0" title="Performance xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_performance" value="0" type="hidden" />
              <input class="prop_result" name="attr_performance_disp" value="@{performance}" type="number" title="Performance total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Persuasion</th>
            <td><input class="prop_val" name="attr_persuasion_base" value="0" title="Persuasion base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_persuasion_xp" value="0" title="Persuasion xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_persuasion" value="0" type="hidden" />
              <input class="prop_result" name="attr_persuasion_disp" value="@{persuasion}" type="number" title="Persuasion total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Streetwise</th>
            <td><input class="prop_val" name="attr_streetwise_base" value="0" title="Streetwise base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_streetwise_xp" value="0" title="Streetwise xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_streetwise" value="0" type="hidden" />
              <input class="prop_result" name="attr_streetwise_disp" value="@{streetwise}" type="number" title="Streetwise total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Subterfuge</th>
            <td><input class="prop_val" name="attr_subterfuge_base" value="0" title="Subterfuge base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_subterfuge_xp" value="0" title="Subterfuge xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_subterfuge" value="0" type="hidden" />
              <input class="prop_result" name="attr_subterfuge_disp" value="@{subterfuge}" type="number" title="Subterfuge total" disabled="true" />
            </td>
          </tr>
          <tr>
            <th style="font-style: italic; border-top: 0.1em solid #4d4d4d;">Cost</th>
          
            <input name="attr_skills_base" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_skills_base_disp" title="Skills base"
            value="@{skills_base}" type="number" disabled="true"/></td>
          
            <input name="attr_skills_xp" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_skills_xp_disp" title="Skills xp"
            value="@{skills_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Knowledges</h3>
      <input title="details" name="attr_knowledges_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch">
      <br />
      <div class="sheet-block-a">
        <table summary="Knowledges basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
          
          <tr>
            <th>Academics</th>
            <td><input class="prop_val" name="attr_academics_radio" value="0" title="Academics total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_academics_radio" value="1" title="Academics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_academics_radio" value="2" title="Academics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_academics_radio" value="3" title="Academics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_academics_radio" value="4" title="Academics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_academics_radio" value="5" title="Academics total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Awareness</th>
            <td><input class="prop_val" name="attr_awareness_radio" value="0" title="Awareness total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_awareness_radio" value="1" title="Awareness total" type="radio" /></td>
            <td><input class="prop_val" name="attr_awareness_radio" value="2" title="Awareness total" type="radio" /></td>
            <td><input class="prop_val" name="attr_awareness_radio" value="3" title="Awareness total" type="radio" /></td>
            <td><input class="prop_val" name="attr_awareness_radio" value="4" title="Awareness total" type="radio" /></td>
            <td><input class="prop_val" name="attr_awareness_radio" value="5" title="Awareness total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Finance</th>
            <td><input class="prop_val" name="attr_finance_radio" value="0" title="Finance total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_finance_radio" value="1" title="Finance total" type="radio" /></td>
            <td><input class="prop_val" name="attr_finance_radio" value="2" title="Finance total" type="radio" /></td>
            <td><input class="prop_val" name="attr_finance_radio" value="3" title="Finance total" type="radio" /></td>
            <td><input class="prop_val" name="attr_finance_radio" value="4" title="Finance total" type="radio" /></td>
            <td><input class="prop_val" name="attr_finance_radio" value="5" title="Finance total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Investigation</th>
            <td><input class="prop_val" name="attr_investigation_radio" value="0" title="Investigation total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_investigation_radio" value="1" title="Investigation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_investigation_radio" value="2" title="Investigation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_investigation_radio" value="3" title="Investigation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_investigation_radio" value="4" title="Investigation total" type="radio" /></td>
            <td><input class="prop_val" name="attr_investigation_radio" value="5" title="Investigation total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Medicine</th>
            <td><input class="prop_val" name="attr_medicine_radio" value="0" title="Medicine total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_medicine_radio" value="1" title="Medicine total" type="radio" /></td>
            <td><input class="prop_val" name="attr_medicine_radio" value="2" title="Medicine total" type="radio" /></td>
            <td><input class="prop_val" name="attr_medicine_radio" value="3" title="Medicine total" type="radio" /></td>
            <td><input class="prop_val" name="attr_medicine_radio" value="4" title="Medicine total" type="radio" /></td>
            <td><input class="prop_val" name="attr_medicine_radio" value="5" title="Medicine total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Occult</th>
            <td><input class="prop_val" name="attr_occult_radio" value="0" title="Occult total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_occult_radio" value="1" title="Occult total" type="radio" /></td>
            <td><input class="prop_val" name="attr_occult_radio" value="2" title="Occult total" type="radio" /></td>
            <td><input class="prop_val" name="attr_occult_radio" value="3" title="Occult total" type="radio" /></td>
            <td><input class="prop_val" name="attr_occult_radio" value="4" title="Occult total" type="radio" /></td>
            <td><input class="prop_val" name="attr_occult_radio" value="5" title="Occult total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Politics</th>
            <td><input class="prop_val" name="attr_politics_radio" value="0" title="Politics total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_politics_radio" value="1" title="Politics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_politics_radio" value="2" title="Politics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_politics_radio" value="3" title="Politics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_politics_radio" value="4" title="Politics total" type="radio" /></td>
            <td><input class="prop_val" name="attr_politics_radio" value="5" title="Politics total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Science</th>
            <td><input class="prop_val" name="attr_science_radio" value="0" title="Science total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_science_radio" value="1" title="Science total" type="radio" /></td>
            <td><input class="prop_val" name="attr_science_radio" value="2" title="Science total" type="radio" /></td>
            <td><input class="prop_val" name="attr_science_radio" value="3" title="Science total" type="radio" /></td>
            <td><input class="prop_val" name="attr_science_radio" value="4" title="Science total" type="radio" /></td>
            <td><input class="prop_val" name="attr_science_radio" value="5" title="Science total" type="radio" /></td>
          </tr>
          
          <tr>
            <th>Technology</th>
            <td><input class="prop_val" name="attr_technology_radio" value="0" title="Technology total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr_technology_radio" value="1" title="Technology total" type="radio" /></td>
            <td><input class="prop_val" name="attr_technology_radio" value="2" title="Technology total" type="radio" /></td>
            <td><input class="prop_val" name="attr_technology_radio" value="3" title="Technology total" type="radio" /></td>
            <td><input class="prop_val" name="attr_technology_radio" value="4" title="Technology total" type="radio" /></td>
            <td><input class="prop_val" name="attr_technology_radio" value="5" title="Technology total" type="radio" /></td>
          </tr>
        </table>
      </div>
      <div class="sheet-block-b">
        <table summary="knowledges detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead>
          <tr>
            
            <th>Academics</th>
            <td><input class="prop_val" name="attr_academics_base" value="0" title="Academics base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_academics_xp" value="0" title="Academics xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_academics" value="0" type="hidden" />
              <input class="prop_result" name="attr_academics_disp" value="@{academics}" type="number" title="Academics total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Awareness</th>
            <td><input class="prop_val" name="attr_awareness_base" value="0" title="Awareness base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_awareness_xp" value="0" title="Awareness xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_awareness" value="0" type="hidden" />
              <input class="prop_result" name="attr_awareness_disp" value="@{awareness}" type="number" title="Awareness total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Finance</th>
            <td><input class="prop_val" name="attr_finance_base" value="0" title="Finance base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_finance_xp" value="0" title="Finance xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_finance" value="0" type="hidden" />
              <input class="prop_result" name="attr_finance_disp" value="@{finance}" type="number" title="Finance total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Investigation</th>
            <td><input class="prop_val" name="attr_investigation_base" value="0" title="Investigation base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_investigation_xp" value="0" title="Investigation xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_investigation" value="0" type="hidden" />
              <input class="prop_result" name="attr_investigation_disp" value="@{investigation}" type="number" title="Investigation total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Medicine</th>
            <td><input class="prop_val" name="attr_medicine_base" value="0" title="Medicine base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_medicine_xp" value="0" title="Medicine xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_medicine" value="0" type="hidden" />
              <input class="prop_result" name="attr_medicine_disp" value="@{medicine}" type="number" title="Medicine total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Occult</th>
            <td><input class="prop_val" name="attr_occult_base" value="0" title="Occult base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_occult_xp" value="0" title="Occult xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_occult" value="0" type="hidden" />
              <input class="prop_result" name="attr_occult_disp" value="@{occult}" type="number" title="Occult total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Politics</th>
            <td><input class="prop_val" name="attr_politics_base" value="0" title="Politics base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_politics_xp" value="0" title="Politics xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_politics" value="0" type="hidden" />
              <input class="prop_result" name="attr_politics_disp" value="@{politics}" type="number" title="Politics total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Science</th>
            <td><input class="prop_val" name="attr_science_base" value="0" title="Science base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_science_xp" value="0" title="Science xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_science" value="0" type="hidden" />
              <input class="prop_result" name="attr_science_disp" value="@{science}" type="number" title="Science total" disabled="true" />
            </td>
          </tr>
          <tr>
            
            <th>Technology</th>
            <td><input class="prop_val" name="attr_technology_base" value="0" title="Technology base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr_technology_xp" value="0" title="Technology xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_technology" value="0" type="hidden" />
              <input class="prop_result" name="attr_technology_disp" value="@{technology}" type="number" title="Technology total" disabled="true" />
            </td>
          </tr>
          <tr>
            <th style="font-style: italic; border-top: 0.1em solid #4d4d4d;">Cost</th>
          
            <input name="attr_knowledges_base" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_knowledges_base_disp" title="Knowledges base"
            value="@{knowledges_base}" type="number" disabled="true"/></td>
          
            <input name="attr_knowledges_xp" value="0" type="hidden" />
            <td style="border-top: 0.1em solid #4d4d4d;"><input name="attr_knowledges_xp_disp" title="Knowledges xp"
            value="@{knowledges_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
    </div>
    <div class="sheet-block-b">
    </div>
  </div>
  
  <!-- Section Advantages -->
  <div class="sheet-divrow">
    <h2 style="display: inline-block;">Advantages</h2>
    
    <input name="attr_advantages_base" value="0" type="hidden" />
    
    <input name="attr_advantages_xp" value="0" type="hidden" />
    
    <input title="hide" name="attr_advantages_switch" style="width: 1em;display: inline-block;" type="checkbox" class="sheet-block-switch">
    <br />
    <div class="sheet-block-a">
      
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Disciplines</h3>
      <input title="details" name="attr_disciplines_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch"/>
      <br />
      <div class="sheet-block-a">
        <table summary="Disciplines basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
        </table>
        <fieldset class="repeating_disciplines">
          <table summary="disciplines basic table">
            
          <tr>
            <th><input class="prop_val" name="attr__name" value="" title=" name" type="text" /></th>
            <td><input class="prop_val" name="attr__radio" value="0" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="1" title=" total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr__radio" value="2" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="3" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="4" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="5" title=" total" type="radio" /></td>
          </tr>
          </table>
        </fieldset>
      </div>
      <div class="sheet-block-b">
        <table summary="Disciplines detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead></table>
        <fieldset class="repeating_disciplines">
          <table summary="Disciplines detail table">
          
          <tr>
            
            <th><input class="prop_name" name="attr__name" title=" name" value="" type="text" /></th>
            <td><input class="prop_val" name="attr__base" value="1" title=" base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr__xp" value="0" title=" xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_" value="0" type="hidden" />
              <input class="prop_result" name="attr__disp" value="@{}" type="number" title=" total" disabled="true" />
            </td>
          </tr>
          </table>
        </fieldset>
        <table summary="Disciplines detail table">
          <tr >
            <th style="font-style: italic; border-top: solid; border-width: 1px 0;">Cost</th>
          
            <input name="attr_disciplines_base" value="0" type="hidden" />
            <td style="border-top: solid; border-width: 1px 0;"><input name="attr_disciplines_base_disp" title="Disciplines base"
            value="@{disciplines_base}" type="number" disabled="true"/></td>
          
            <input name="attr_disciplines_xp" value="0" type="hidden" />
            <td style="border-top: solid; border-width: 1px 0;"><input name="attr_disciplines_xp_disp" title="Disciplines xp"
            value="@{disciplines_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Advantages And Flaws</h3>
      <input title="details" name="attr_advantages and flaws_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch"/>
      <br />
      <div class="sheet-block-a">
        <table summary="Advantages And Flaws basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
        </table>
        <fieldset class="repeating_advantages and flaws">
          <table summary="advantages and flaws basic table">
            
          <tr>
            <th><input class="prop_val" name="attr__name" value="" title=" name" type="text" /></th>
            <td><input class="prop_val" name="attr__radio" value="0" title=" total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr__radio" value="1" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="2" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="3" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="4" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="5" title=" total" type="radio" /></td>
          </tr>
          </table>
        </fieldset>
      </div>
      <div class="sheet-block-b">
        <table summary="Advantages And Flaws detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead></table>
        <fieldset class="repeating_advantages and flaws">
          <table summary="Advantages And Flaws detail table">
          
          <tr>
            
            <th><input class="prop_name" name="attr__name" title=" name" value="" type="text" /></th>
            <td><input class="prop_val" name="attr__base" value="0" title=" base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr__xp" value="0" title=" xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_" value="0" type="hidden" />
              <input class="prop_result" name="attr__disp" value="@{}" type="number" title=" total" disabled="true" />
            </td>
          </tr>
          </table>
        </fieldset>
        <table summary="Advantages And Flaws detail table">
          <tr >
            <th style="font-style: italic; border-top: solid; border-width: 1px 0;">Cost</th>
          
            <input name="attr_advantages and flaws_base" value="0" type="hidden" />
            <td style="border-top: solid; border-width: 1px 0;"><input name="attr_advantages and flaws_base_disp" title="Advantages And Flaws base"
            value="@{advantages and flaws_base}" type="number" disabled="true"/></td>
          
            <input name="attr_advantages and flaws_xp" value="0" type="hidden" />
            <td style="border-top: solid; border-width: 1px 0;"><input name="attr_advantages and flaws_xp_disp" title="Advantages And Flaws xp"
            value="@{advantages and flaws_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
          

    <div class="sheet-divcol">
      <h3 style="display: inline-block;">Specialty</h3>
      <input title="details" name="attr_specialty_switch" style="width: 1em;float: right;" type="checkbox" class="sheet-block-switch"/>
      <br />
      <div class="sheet-block-a">
        <table summary="Specialty basic table">
          <thead>
            <tr>
              <td></td>
              <td>0</td>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
              <td>5</td>
            </tr>
          </thead>
        </table>
        <fieldset class="repeating_specialty">
          <table summary="specialty basic table">
            
          <tr>
            <th><input class="prop_val" name="attr__name" value="" title=" name" type="text" /></th>
            <td><input class="prop_val" name="attr__radio" value="0" title=" total" type="radio" checked/></td>
            <td><input class="prop_val" name="attr__radio" value="1" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="2" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="3" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="4" title=" total" type="radio" /></td>
            <td><input class="prop_val" name="attr__radio" value="5" title=" total" type="radio" /></td>
          </tr>
          </table>
        </fieldset>
      </div>
      <div class="sheet-block-b">
        <table summary="Specialty detail table">
            <thead>
              <tr>
                <th></th>
                <td>Base</td>
                <td>Xp</td>
                <td>Total</td>
              </tr>
            </thead></table>
        <fieldset class="repeating_specialty">
          <table summary="Specialty detail table">
          
          <tr>
            
            <th><input class="prop_name" name="attr__name" title=" name" value="" type="text" /></th>
            <td><input class="prop_val" name="attr__base" value="0" title=" base" min="0" max="5" type="number" /></td>
            <td><input class="prop_val" name="attr__xp" value="0" title=" xp" min="0" max="5" type="number" /></td>
            <td>
              <input class="prop_result" name="attr_" value="0" type="hidden" />
              <input class="prop_result" name="attr__disp" value="@{}" type="number" title=" total" disabled="true" />
            </td>
          </tr>
          </table>
        </fieldset>
        <table summary="Specialty detail table">
          <tr >
            <th style="font-style: italic; border-top: solid; border-width: 1px 0;">Cost</th>
          
            <input name="attr_specialty_base" value="0" type="hidden" />
            <td style="border-top: solid; border-width: 1px 0;"><input name="attr_specialty_base_disp" title="Specialty base"
            value="@{specialty_base}" type="number" disabled="true"/></td>
          
            <input name="attr_specialty_xp" value="0" type="hidden" />
            <td style="border-top: solid; border-width: 1px 0;"><input name="attr_specialty_xp_disp" title="Specialty xp"
            value="@{specialty_xp}" type="number" disabled="true"/></td>
          
            <td></td>
          </tr>
        </table>
      </div>
    </div>
    </div>
    <div class="sheet-block-b">
    </div>
  </div>
  

</div>

<script type="text/worker">
const data = JSON.parse('{"title":"Vampire the Masquerade","subtitle":"5th Edition","header":{"col1":{"fields":{"name":{},"chronicle":{},"sire":{}}},"col2":{"fields":{"concept":{},"ambition":{},"desire":{}}},"col3":{"fields":{"predator":{},"clan":{},"generation":{}}}},"sections":{"mult_xp_cost":0,"new_xp_cost":0,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":"","fields":{"attributes":{"mult_xp_cost":4,"val_start":1,"initial_base":1,"fields":{"physical":{"fields":{"strength":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""},"dexterity":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""},"stamina":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""}},"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""},"social":{"fields":{"charisma":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""},"manipulation":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""},"composure":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""}},"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""},"mental":{"fields":{"intelligence":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""},"wits":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""},"resolve":{"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""}},"mult_xp_cost":4,"new_xp_cost":0,"val_start":1,"val_min":0,"val_max":5,"initial_base":1,"nameable":false,"field_type":"bar","base_calc":""}},"new_xp_cost":0,"val_min":0,"val_max":5,"nameable":false,"field_type":"bar","base_calc":""},"abilities":{"mult_xp_cost":2,"new_xp_cost":3,"fields":{"talents":{"fields":{"atheletics":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"brawl":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"craft":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"drive":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"firearms":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"melee":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"larceny":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"stealth":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"survival":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""}},"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"skills":{"singluar":"skill","fields":{"animal_ken":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"etiquette":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"insight":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"initimidation":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"leadership":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"performance":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"persuasion":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"streetwise":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"subterfuge":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""}},"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"knowledges":{"fields":{"academics":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"awareness":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"finance":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"investigation":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"medicine":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"occult":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"politics":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"science":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"technology":{"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""}},"mult_xp_cost":2,"new_xp_cost":3,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""}},"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""},"advantages":{"fields":{"disciplines":{"nameable":"true","field_type":"repeating_bar","mult_xp_cost":7,"mult_xp_cost_clan":5,"mult_xp_cost_caitiff":6,"new_xp_cost":10,"initial_base":1,"val_start":1,"fields":{},"val_min":0,"val_max":5,"base_calc":""},"advantages and flaws":{"nameable":"true","field_type":"repeating_bar","fields":{},"mult_xp_cost":0,"new_xp_cost":0,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"base_calc":""},"specialty":{"nameable":"true","field_type":"repeating_bar","fields":{},"mult_xp_cost":0,"new_xp_cost":0,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"base_calc":""}},"mult_xp_cost":0,"new_xp_cost":0,"val_start":0,"val_min":0,"val_max":5,"initial_base":0,"nameable":false,"field_type":"bar","base_calc":""}}},"clan":{"assamite":{"disciplines":["celerity","obfuscate","quietus"]},"brujah":{"disciplines":["celerity","potence","presence"]},"followers_of_set":{"disciplines":["obfuscate","presence","serpentis"]},"gangrel":{"disciplines":["animalism","fortitude","protean"]},"giovanni":{"disciplines":["dominate","necromancy","potence"]},"lasombra":{"disciplines":["dominate","obtenebration","potence"]},"malkavian":{"disciplines":["auspex","dementation","obfuscate"]},"nosferatu":{"disciplines":["animalism","obfuscate","potence"]},"ravnos":{"disciplines":["animalism","chimerstry","fortitude"]},"toreador":{"disciplines":["auspex","celerity","presence"]},"tremere":{"disciplines":["auspex","dominate","thaumaturgy"]},"tzimisce":{"disciplines":["animalism","auspex","vicissitude"]},"ventrue":{"disciplines":["dominate","fortitude","presence"]},"caitiff":{"disciplines":[]},"human":{"disciplines":[]},"werewolf":{"disciplines":["celerity","potence","protean"]},"mage":{"disciplines":["auspex","chimerstry","dominate","fortitude","presence","thaumaturgy"]},"faerie":{"disciplines":["animalism","auspex","chimerstry","celerity","obfuscate","protean"]},"ghost":{"disciplines":["auspex","chimerstry","dementation","dominate","presence","vicissitude"]},"demon":{"disciplines":["dominate","potence","fortitude","daimoinon","vicissitude"]}},"generation_table":{"hdr":["trait_max","blood_pool_max","blood_per_turn"],"3":[10,100,20],"4":[9,50,10],"5":[8,40,8],"6":[7,30,6],"7":[6,20,4],"8":[5,15,3],"9":[5,14,2],"10":[5,13,1],"11":[5,12,1],"12":[5,11,1],"13":[5,10,1]},"health":{"0":{"state":"Incapacitated","penalty":-100},"1":{"state":"Crippled","penalty":-5},"2":{"state":"Mauled","penalty":-2},"3":{"state":"Wounded","penalty":-2},"4":{"state":"Injured","penalty":-1},"5":{"state":"Hurt","penalty":-1},"6":{"state":"Bruised","penalty":0}},"will":{"0":{"state":"Impaired","penalty":-2}},"postfixes":["base","xp"]}');
"use strict";
console.log(data);

// change arg lists
function list_changed(l) {
  var out = l.map(x => "change:" + x).join(" ");
  return out;
}

function xpCost(k, new_cost, b, xp) {
  var cost = 0;
  if (xp > 0) {
    cost += k * (b - 1) * xp + k * xp * (xp + 1) / 2;
    if (b === 0) {
      cost += new_cost;
    }
  }
  return cost;
}

function attach_field_sum(name, fields, postfix) {
  var deps = Object.keys(fields).map(x => x + "_" + postfix);
  on(list_changed(deps), function(eventInfo) {
    console.log(name, postfix, "deps changed");
    getAttrs(deps, function(v) {
      var d = {};
      var cost = 0;
      for (field in fields) {
        cost += parseInt(v[field + "_" + postfix], 10);
      }
      d[name + "_" + postfix] = cost;
      setAttrs(d);
      console.log(d);
    });
  });
}

function attach_property(name) {
  //console.log("attaching property " + name);
  var tot_deps = [
    name + "_base",
    name + "_xp"
  ];
  var radio_deps = [
    name + "_radio",
    name
  ];

  // update total if deps change
  on(list_changed(tot_deps) + " sheet:opened", function() {
    console.log(name + " total deps changed");
    getAttrs(tot_deps, function(v) {
      set_d = {};
      var b = parseInt(v[name + "_base"], 10);
      var xp = parseInt(v[name + "_xp"], 10);
      var tot = b + xp;
      console.log("updating total for " + name + ", b:", b, " xp:", xp)
      set_d[name] = tot;
      setAttrs(set_d);
    });
  });

  // update xp, base if radio changes
  on("change:" + name + "_radio", function() {
    console.log(name + " radio changed");
    getAttrs([].concat(radio_deps, tot_deps), function(v) {
      set_d = {};
      var b = parseInt(v[name + "_base"], 10);
      var xp = parseInt(v[name + "_xp"], 10);
      var radio = parseInt(v[name + "_radio"], 10);
      console.log("updating total for " + name + " b:", b, " radio:", radio);
      if (radio < b) {
        b = radio;
        xp = 0;
      } else {
        xp = radio - b;
      }
      set_d[name + "_base"] = b;
      set_d[name + "_xp"] = xp;
      setAttrs(set_d);
    });
  });

  // update radio if total changes
  on("change:" + name, function() {
    console.log(name + " total changed");
    getAttrs([].concat(radio_deps, tot_deps), function(v) {
      set_d = {};
      var tot = parseInt(v[name], 10);
      console.log("updating radio for " + name + " tot:", tot);
      set_d[name + "_radio"] = tot;
      setAttrs(set_d);
    });
  });
}

function attach_type_bar(key_type, type) {
  console.log("attaching type", key_type);

  // handle no field case
  if (type.fields === undefined) {
    type.fields = {};
  }

  // properties
  for (var key_prop in type.fields) {
    attach_property(key_prop);
  }

  // base
  var base_deps = Object.keys(type.fields).map(x => x + '_base');
  on(list_changed(base_deps), function() {
    console.log("base_" + key_type + " deps changed");
    getAttrs(base_deps, function(v) {
      var d = {};
      var base = 0;
      for (i in base_deps) {
        base += parseInt(v[base_deps[i]], 10);
      }
      base -= Object.keys(type.fields).length*type.initial_base;
      d[key_type + "_base"] = base;
      setAttrs(d);
      console.log(d);
    });
  });

  // xp
  var xp_deps = [].concat(...Object.keys(type.fields).map(x => [x + "_xp", x + "_base"]));
  on(list_changed(xp_deps), function() {
    console.log(key_type + " xp deps changed");
    getAttrs(xp_deps, function(v) {
      var d = {};
      var cost = 0;
      for (name in type.fields) {
        var b = parseInt(v[name + "_base"], 10);
        var xp = parseInt(v[name + "_xp"], 10);
        cost += xpCost(type.mult_xp_cost, type.new_xp_cost, b, xp);
      }
      d[key_type + "_xp"] = cost;
      setAttrs(d);
      console.log(d);
    });
  });
}

function attach_type_repeating_bar(type_name, data) {
  on("change:repeating_" + type_name, function(eventInfo) {
    var repeating_name = "repeating_" + type_name;
    getSectionIDs("repeating_" + type_name, function(idArray) {
      var attrs = [].concat(...idArray.map(x => [].concat(
        repeating_name + "_" + x + "__base",
        repeating_name + "_" + x + "__xp",
        repeating_name + "_" + x + "__name"
      )));
      getAttrs(attrs, function(v) {
        console.log(eventInfo);
        var b_tot = 0;
        var xp_tot = 0;
        for (x in idArray) {
          id = idArray[x];
          var name = repeating_name + "_" + id;
          console.log("getting data for ", name);
          var name_b = name + "__base";
          var name_xp = name + "__xp";
          var name_dis = name + "__name";
          var b = parseInt(v[name_b], 10);
          var xp = parseInt(v[name_xp], 10);
          var dis = v[name_dis];
          console.log(dis, " b:", b, " xp:", xp);
          b_tot += b;
          xp_tot += xpCost(data.mult_xp_cost, data.new_xp_cost, b, xp);
        }
        var d = {}
        d[type_name + "_base"] = b_tot;
        d[type_name + "_xp"] = xp_tot;
        console.log("setting attrs", d);
        setAttrs(d);
      });
    });
  });
}

function attach_section(name, section) {
  console.log("attaching section", name);

  // handle no field case
  if (section.fields === undefined) {
    section.fields = {};
  }

  for (var key_type in section.fields) {
    var type = section.fields[key_type];
    if (type.field_type === "repeating_bar") {
      attach_type_repeating_bar(key_type, type);
    } else {
      attach_type_bar(key_type, type);
    }
  }

  // update field sums
  attach_field_sum(name, section.fields, "xp");
}

function attach_health(data) {
  var health_deps = ["health_levels", "dmg_superficial", "dmg_aggravated"];
  on(list_changed(health_deps), function(eventInfo) {
    console.log("damage changed");
    getAttrs(health_deps, function(v) {
      var dmg = {
        sup: parseInt(v["dmg_superficial"], 10),
        aggr: parseInt(v["dmg_aggravated"], 10)
      };
      var health_levels = parseInt(v["health_levels"], 10);
      for (key in dmg) {
        if (dmg[key] < 0) {
          dmg[key] = 0;
        }
      }

      var count = 0;
      while (dmg["sup"] + dmg["aggr"] > health_levels) {
        if (dmg["sup"] > 1) {
          console.log("carrying superficial damage to aggravated");
          dmg["sup"] -= 2;
          dmg["aggr"] += 1;
        } else if (dmg["aggr"] > 0) {
          console.log("max damage reached");
          dmg["sup"] = 0;
          dmg["aggr"] = health_levels;
        }
        // safeguard for infinite loop
        if (count++ > 100) {
          console.error("exceeded maximum loop count in health update");
          break;
        }
      }
      var health = health_levels - (dmg["sup"] + dmg["aggr"]);
      var penalty = 0;
      var health_state = "OK";
      if (data["health"][health] != undefined) {
        penalty = data["health"][health]["penalty"];
        health_state = data["health"][health]["state"];
      }
      setAttrs({
        dmg_superficial: dmg["sup"],
        dmg_aggravated: dmg["aggr"],
        health: health,
        wound_penalty: penalty,
        health_state: health_state
      });
    });
  });
}

function attach_will(data) {
  var will_deps = ["will_levels", "will_superficial", "will_aggravated"];
  on(list_changed(will_deps), function(eventInfo) {
    console.log("will changed");
    getAttrs(will_deps, function(v) {
      var dmg = {
        sup: parseInt(v["will_superficial"], 10),
        aggr: parseInt(v["will_aggravated"], 10)
      };
      var will_levels = parseInt(v["will_levels"], 10);
      for (key in dmg) {
        if (dmg[key] < 0) {
          dmg[key] = 0;
        }
      }

      var count = 0;
      while (dmg["sup"] + dmg["aggr"] > will_levels) {
        if (dmg["sup"] > 1) {
          console.log("carrying superficial damage to aggravated");
          dmg["sup"] -= 2;
          dmg["aggr"] += 1;
        } else if (dmg["aggr"] > 0) {
          console.log("max damage reached");
          dmg["sup"] = 0;
          dmg["aggr"] = will_levels;
        }
        // safeguard for infinite loop
        if (count++ > 100) {
          console.error("exceeded maximum loop count in will update");
          break;
        }
      }
      var will = will_levels - (dmg["sup"] + dmg["aggr"]);
      var penalty = 0;
      var will_state = "OK";
      if (data["will"][will] != undefined) {
        penalty = data["will"][will]["penalty"];
        will_state = data["will"][will]["state"];
      }
      setAttrs({
        will_superficial: dmg["sup"],
        will_aggravated: dmg["aggr"],
        will: will,
        will_penalty: penalty,
        will_state: will_state
      });
    });
  });
}



function attach_data(data) {
  console.log("attaching data");

  if (data.sections.fields === undefined) {
    data.sections.fields = {};
  }

  for (var key_sect in data.sections.fields) {
    var sect = data.sections.fields[key_sect];
    attach_section(key_sect, sect);
  }

  // attach field sums
  attach_field_sum("total", data.sections.fields, "xp");

  // attach health
  attach_health(data);

  // attach will
  attach_will(data);
}

attach_data(data);

on("sheet:opened", function() {
  console.log("sheet opened");
});

/*
on("change:clan", function() {
  console.log("clan change");
  // initialize to clan disciplines
  getAttrs([].concat(discipline_names, ["clan"]), function(v) {
    var d_set = {};
    for (d in discipline_names) {
      var discipline_name = v[discipline_names[d]];
      console.log("discipline name", discipline_names[d], discipline_name);
      if (d < clan_disciplines[v.clan].length) {
        clan_discipline = clan_disciplines[v.clan][d];
        d_set[discipline_names[d]] = clan_discipline;
      }
    }
    setAttrs(d_set);
  });
});
*/


// vim: set et fenc=utf-8 ff=unix ft=javascript sts=0 sw=2 ts=2 :

</script>

</body>

<!-- vim: set et ft=html fenc=utf-8 ff=dos sts=0 sw=4 ts=4 : -->